<!DOCTYPE html>
<html lang="fa" dir="rtl">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">
<meta name="title" content="Film Posters of Iran | آرشیو پوسترهای سینمای ایران">
<meta name="description" content="آرشیو پوستر فیلم‌های سینمایی ایرانی قبل و بعد از انقلاب؛ دربردارندهٔ آثار محمدعلی باطنی، محمدعلی حدت، محسن دولو، مسعود بهنام، مرتضی ممیز، ابراهیم حقیقی و دیگر طراحان گرافیک.">
<meta name="keywords" content="پوستر فیلم, فیلم ایرانی, پوستر سینمایی, محمدعلی باطنی, محمدعلی حدت, محسن دولو, مرتضی ممیز, ابراهیم حقیقی, قباد شیوا, فرشید مثقالی, جشنواره فیلم فجر, دانلود پوستر فیلم, عباس کیارستمی film posters of Iran, Iranian films">
<meta property="twitter:title" content="Film Posters of Iran | آرشیو پوسترهای سینمای ایران">
<meta property="twitter:description" content="آرشیو پوستر فیلم‌های سینمایی ایرانی قبل و بعد از انقلاب؛ دربردارندهٔ آثار محمدعلی باطنی، محمدعلی حدت، محسن دولو، مسعود بهنام، مرتضی ممیز، ابراهیم حقیقی و دیگر طراحان گرافیک">
<meta property="og:title" content="Film Posters of Iran | آرشیو پوسترهای سینمای ایران" />
<meta property="og:site_name" content="آرشیو پوسترهای سینمای ایران"/>
<meta property="og:description" content="آرشیو پوستر فیلم‌های سینمایی ایرانی قبل و بعد از انقلاب؛ دربردارندهٔ آثار محمدعلی باطنی، محمدعلی حدت، محسن دولو، مسعود بهنام، مرتضی ممیز، ابراهیم حقیقی و دیگر طراحان گرافیک" />
<title>آرشیو پوسترهای سینمای ایران</title>
<script src="vue.global.prod.min.js"></script>
<!-- <meta property="og:image" content="Link to your logo" /> -->
<link rel="icon" href="favicon.svg">
<style>
* {
	font-family: system-ui;
	box-sizing: border-box;
}

@font-face {
	font-family: 'Material Symbols Rounded';
	/* https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded&icon_names=close,download,info,keyboard_arrow_up,menu,north,person_edit,refresh,swap_vert */
	src: url(data:application/font-woff2;base64,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) format('woff2');
}

.material-symbols-rounded {
	font-family: 'Material Symbols Rounded';
	font-size: 24px;
	display: inline-block;
	white-space: nowrap;
	line-height: 1;
}

html {
	scroll-behavior: smooth;
}

body {
	display: flex;
	justify-content: flex-start;
	align-items: flex-start;
	min-height: 100vh;
	background-color: light-dark(#eee, #121212);
	color: light-dark(black, #e0e0e0);
	margin: 0;
	transition: background-color 0.3s, color 0.3s;
	overflow-x: hidden;
}

#app {
	display: flex;
	flex: 1;
	width: 100%;
	padding: 20px;
	transition: background-color 0.3s, color 0.3s;
}

#main-content {
	flex: 1;
	margin-right: 20px;
	width: 100%;
	display: flex;
	flex-direction: column;
	align-items: center;
	max-width: 100%;
	overflow-x: hidden;
}

.search-container {
	display: flex;
	align-items: center;
	gap: 10px;
	margin-bottom: 10px;
	position: relative;
}

.search-bar {
	position: sticky;
	top: 0;
	background-color: light-dark(#fff, #222);
	padding: 10px;
	transition: transform 0.3s ease-in-out;
	border-radius: 16px;
	margin-bottom: 15px;
	max-width: 1200px;
	width: 100%;
	z-index: 100;
}

/*
.search-bar.hidden {
transform: translateY(-100%);
}*/

input[type="text"] {
	width: 100%;
	padding: 10px;
	border: 1px solid #ccc;
	border-radius: 12px;
}

.options {
	display: flex;
	flex-wrap: wrap;
	column-gap: 20px;
	row-gap: 10px;
	justify-content: space-around;
	margin: 10px 0 10px;
	border: none;
	align-items: center;
}

.results-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
	gap: 15px;
	max-width: 1200px;
	width: 100%;
	z-index: 1;
}

.item-card {
	text-align: center;
	padding: 15px 5px;
	background: light-dark(#fff, #222);
	border-radius: 12px;
	display: flex;
	flex-direction: column;
	justify-content: flex-end;
	align-items: center;
	transition: background-color 0.3s, border-color 0.3s;
	position: relative;
}

.item-image {
	width: 100%;
	object-fit: contain;
	border-radius: 4px;
	background-color: #eee;
	margin-bottom: 10px;
	transition: filter 0.3s;
}

.item-title {
	font-weight: bold;
}

.year-link {
	color: light-dark(#777, #999);
	cursor: pointer;
	text-decoration: none;
	margin-right: 3px;
	font-weight: normal;
}

.year-link:hover {
	text-decoration: underline;
}

.item-designer {
	font-size: 0.85em;
	color: light-dark(#777, #999);
	margin-top: 10px;
}

.item-designer a {
	color: light-dark(#222, #ddd);
	text-decoration: none;
	margin-left: 4px;
}

.item-designer a:hover {
	text-decoration: underline;
}

.item-links {
	margin-top: 10px;
}

.item-links a {
	color: light-dark(#555, #bbb);
	text-decoration: none;
	margin: 0 5px;
}

.item-links a:hover {
	text-decoration: underline;
}

#film-links {
	background: light-dark(#eee, #333);
	padding: 3px 8px;
	border-radius: 40px;
	font-weight: bold;
}

.linkIcon {
	opacity: 0.7;
	height: 14px;
	transition: 0.1s;
}

.linkIcon:hover {
	opacity: 1;
}

.image-container {
	position: relative;
	width: 100%;
	display: flex;
	justify-content: center;
	align-items: center;
}

.download-btn {
	position: absolute;
	bottom: 20px;
	right: 10px;
	background-color: rgba(0, 0, 0, 0.7);
	color: white;
	border: none;
	padding: 8px 12px;
	border-radius: 5px;
	cursor: pointer;
	opacity: 0;
	transition: opacity 0.3s;
	z-index: 10;
}

.image-container:hover .download-btn {
	opacity: 1;
}

.clickable-image {
	cursor: pointer;
	display: block;
	width: 100%;
	height: auto;
	z-index: 2;
}

.no-logo-placeholder {
	height: 50px;
	border: 1px light-dark(#eee, #333) solid;
	display: flex;
	justify-content: center;
	align-items: center;
	border-radius: 4px;
	color: light-dark(#ccc, #555);
	margin-bottom: 10px;
}

.lightbox {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-color: rgba(0, 0, 0, 0.8);
	display: flex;
	justify-content: center;
	align-items: center;
	z-index: 1000;
}

.lightbox img {
	max-width: 90%;
	max-height: 90%;
	border-radius: 10px;
	z-index: 2;
}

.loading-spinner {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	z-index: 1;
}

.lightbox-button {
	position: absolute;
	right: 20px;
	background: none;
	border: none;
	padding: 28px 30px;
	cursor: pointer;
	z-index: 1000;
	color: light-dark(#fff, #fff);
	border-radius: 60px;
}

.lightbox-button:hover {
	background: #fff4;
}

#toTop {
	transition: bottom ease-in-out 350ms, opacity linear 350ms;
	bottom: -100px;
	width: 52px;
	height: 52px;
	position: fixed;
	left: 30px;
	z-index: 99;
	font-size: 18px;
	border: none;
	outline: none;
	background-color: gray;
	color: white;
	cursor: pointer;
	padding: 15px;
	border-radius: 10px;
}

#toTop:hover {
	opacity: 60%;
	box-shadow: 0px 4px 10px gray;
	transition-duration: 0.1s;
}

#resetSearch {
	border: none;
	color: white;
	padding: 6px 6px 4px;
	text-align: center;
	text-decoration: none;
	display: inline-block;
	cursor: pointer;
	border-radius: 20px;
	background-color: gray;
	opacity: 80%;
	transition-duration: 0.3s;
}

#resetSearch:hover {
	opacity: 100%;
	background-color: #b77;
	transition-duration: 0.3s;
}

.toggle-switch {
	display: flex;
	align-items: center;
	background-color: light-dark(#e0e0e0, #333);
	border-radius: 12px;
	padding: 4px;
	cursor: pointer;
	user-select: none;
	width: 120px;
	position: relative;
	transition: background-color 0.3s;
}

.toggle-switch span {
	flex: 1;
	text-align: center;
	padding: 8px;
	color: light-dark(#fff, #fff);
	z-index: 1;
	transition: color 0.3s;
}

.toggle-switch span.active {
	color: light-dark(#888, #888);
}

.toggle-switch::before {
	content: '';
	position: absolute;
	top: 4px;
	left: 4px;
	width: 56px;
	height: calc(100% - 8px);
	background-color: light-dark(#b77, #b77);
	border-radius: 8px;
	transition: 0.4s cubic-bezier(1, 0, 0, 1);
}

.toggle-switch.active {
	background-color: light-dark(#b77, #b77);
}

.toggle-switch[data-mode="poster"]::before {
	transform: translateX(56px);
}

.sort-order-container {
	display: flex;
	align-items: center;
	gap: 10px;
}

.sort-order-container label {
	font-size: 1em;
	color: light-dark(#000, #fff);
}

.triple-switch {
	display: flex;
	align-items: center;
	background-color: light-dark(#e0e0e0, #333);
	border-radius: 50px;
	padding: 4px;
	cursor: pointer;
	user-select: none;
	width: fit-content;
	position: relative;
	transition: background-color 0.3s;
}

.triple-switch span {
	flex: 1;
	text-align: center;
	padding: 8px 16px;
	border-radius: 30px;
	color: light-dark(#888, #888);
	transition: background-color 0.2s, color 0.2s;
	cursor: pointer;
	z-index: 1;
}

.triple-switch span.active {
	color: light-dark(#fff, #fff);
}

.triple-switch::before {
	content: '';
	position: absolute;
	top: 4px;
	left: 4px;
	width: calc(37%);
	height: calc(100% - 8px);
	background-color: light-dark(#b77, #b77);
	border-radius: 30px;
	transition: 0.4s cubic-bezier(1, 0, 0, 1);
	transition-property: transform, width;
}

.triple-switch[data-sort="alphabetical"]::before {
	transform: translateX(191%);
	width: calc(33%);
}

.triple-switch[data-sort="year"]::before {
	transform: translateX(128%);
	width: calc(28%);
}

.triple-switch[data-sort="random"]::before {
	transform: translateX(0%);
}

.similar-chars-toggle {
	display: flex;
	align-items: center;
	gap: 5px;
}

.similar-chars-toggle label {
	font-size: 1em;
	color: light-dark(#000, #fff);
	cursor: pointer;
	display: flex;
	align-items: center;
	gap: 5px;
}

.similar-chars-toggle input[type="checkbox"] {
	width: 15px;
	height: 15px;
	cursor: pointer;
}

.similar-chars-toggle .tooltip {
	position: relative;
	display: inline-block;
	cursor: pointer;
}

.tooltip {
	position: relative;
	display: inline-block;
}

.tooltip .tooltiptext {
	visibility: hidden;
	width: 150px;
	background-color: #666;
	color: #fff;
	text-align: center;
	border-radius: 6px;
	padding: 5px;
	position: absolute;
	z-index: 1000;
	top: 150%;
	left: 70%;
	margin-left: -53px;
	text-wrap: auto;
	font-size: medium;
	line-height: normal;
}

.tooltip .tooltiptext::after {
	content: "";
	position: absolute;
	bottom: 100%;
	left: 50%;
	opacity: 1;
	margin-left: -32.5px;
	border-width: 5px;
	border-style: solid;
	border-color: transparent transparent #666 transparent;
	transition: opacity 0.5s;
}

.tooltip:hover .tooltiptext {
	visibility: visible;
	opacity: 0.9;
	transition-delay: 0.3s;
}

#toggleSidebarButton {
	background: none;
	border: none;
	cursor: pointer;
	padding: 6px;
}

.rotate-up {
	transform: rotate(360deg) translateY(3px);
}

.rotate-down {
	transform: rotate(180deg) translateY(3px);
}

.sidebar {
	width: 440px;
	overflow-y: auto;
	z-index: 1000;
	transition: transform 0.3s ease-in-out;
	resize: none;
	position: relative;
	height: fit-content;
}

.sidebar-content {
	padding: 0 0 0 15px;
}

.mobile-only {
	display: none;
}

.desktop-only {
	display: inline;
}

.sidebar-resize-handle {
	position: absolute;
	top: 0;
	left: 0;
	width: 5px;
	height: 98%;
	cursor: ew-resize;
	background-color: rgba(128, 128, 128, 0.1);
	z-index: 1001;
	transition: background-color 0.3s;
}

.sidebar-resize-handle:hover {
	background-color: rgba(128, 128, 128, 0.3);
}

.sidebar-section {
	flex: 1;
	display: flex;
	flex-direction: column;
	min-height: 0;
	transition: flex-grow 0.3s ease-in-out;
	padding-bottom: 8px;
}

.sidebar-section-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	cursor: pointer;
	padding: 0px 20px 0 5px;
	background-color: light-dark(#ddd, #333);
	border-radius: 10px;
	height: 36px;
	transition: 0.4s cubic-bezier(1, 0, 0, 1) border-radius;
}

.sidebar-section-body {
	flex: 1;
	padding-top: 10px;
	padding-bottom: 10px;
	padding-inline: 10px;
	overflow-y: scroll;
	interpolate-size: allow-keywords;
	min-height: 0;
	background-color: light-dark(#fff, #000);
	opacity: 1;
	max-height: 350px;
	border-radius: 0 0 10px 10px;
	border: 1px light-dark(#ddd, #333) solid;
	transition: 0.4s cubic-bezier(1, 0, 0, 1);
	transition-property: opacity, max-height, padding-top, padding-bottom;
}

.sidebar-section.expanded .sidebar-section-header {
	border-radius: 10px 10px 0 0;
}

.sidebar-section.collapsed .sidebar-section-body {
	padding-top: 0;
	padding-bottom: 0;
	opacity: 0;
	max-height: 0;
	overflow-y: hidden;
}

.sidebar-section.collapsed {
	flex-grow: 0;
	border: none;
}

.sidebar-section.expanded {
	flex-grow: 1;
}

.collapse-button {
	width: 40px;
	border: none;
	transition: transform 150ms ease-in-out;
	background: none;
	border: none;
	font-size: 18px;
	cursor: pointer;
	color: light-dark(#444, #ccc);
	-webkit-user-select: none;
	user-select: none;
}

.designer-grid,
.director-grid,
.year-grid,
.letter-grid {
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
}

.designer-item,
.director-item,
.year-item,
.letter-item {
	padding: 5px 10px;
	border-radius: 30px;
	cursor: pointer;
	transition: background-color 0.3s;
	white-space: nowrap;
	font-size: smaller;
	border: 1px solid light-dark(#000, #666);
	display: flex;
	gap: 5px;
}

.designer-item:hover,
.director-item:hover,
.year-item:hover,
.letter-item:hover {
	background-color: light-dark(hsl(0 0% 88% / 1), hsl(0 0% 20% / 1));
}

.count {
	color: light-dark(#8c8c8c, #808080);
}

.no-results {
	text-align: center;
	color: light-dark(#777, #999);
	padding: 5px 10px;
	font-size: 0.9em;
}

.filters-container {
	display: flex;
	flex-wrap: wrap;
	gap: 10px;
	padding: 10px;
	margin-bottom: 15px;
	background-color: light-dark(#fff, #222);
	border-radius: 16px;
	max-width: 1200px;
	width: 100%;
}

.filter-item {
	display: flex;
	align-items: center;
	gap: 5px;
	padding: 5px 10px;
	background-color: light-dark(#eee, #333);
	border-radius: 20px;
	font-size: 0.9em;
	cursor: pointer;
	transition: background-color 0.3s;
}

.filter-item:hover {
	background-color: light-dark(#ddd, #444);
}

.remove-filter {
	background: none;
	border: none;
	color: light-dark(#555, #bbb);
	cursor: pointer;
	padding: 0;
	display: flex;
	align-items: center;
}

.remove-filter:hover {
	color: #b00;
}

.pixelated {
	filter: blur(3px);
	image-rendering: pixelated;
}

.clearSearch {
	position: absolute;
	top: 50%;
	transform: translateY(-50%);
	display: flex;
	inset-inline-end: 12px;
	cursor: pointer;
	color: #888;
	font-size: x-large;
}

@media (max-width: 768px) {
	#app {
		padding: 0;
	}

	#main-content {
		margin-right: 0;
		padding: 15px;
		flex-direction: column;
	}

	.search-bar {
		max-width: 100%;
		padding: 15px;
	}

	.results-grid {
		width: 100%;
		max-width: 100%;
		grid-template-columns: repeat(2, 1fr);
	}

	.options {
		gap: 15px;
		align-items: center;
		transition: 0.3s ease-in-out;
		max-height: 200px;
		opacity: 1;
	}

	.options.collapsed {
		max-height: 0;
		opacity: 0;
		margin: 0;
		padding: 0;
		visibility: hidden;
	}

	#showSidebarButton {
		display: inline-block;
	}

	#hideSidebarButton {
		display: inline-block;
		margin-bottom: 10px;
		padding: 8px 14px;
		border: none;
		background: none;
		font-size: x-large;
		cursor: pointer;
	}

	.sidebar {
		position: fixed;
		top: 0;
		right: -105%;
		width: 385px !important;
		height: 100vh;
		background-color: light-dark(#fff, #121212);
		transition: right 0.3s cubic-bezier(1, 0, 0, 1);
		z-index: 1000;
		display: block;
	}

	.sidebar.visible {
		right: 0;
		display: block;
		transform: translateX(0);
	}

	.sidebar-overlay {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.5);
		z-index: 999;
		display: none;
	}

	.sidebar-content {
		padding: 15px 15px 60px 15px;
		background: light-dark(#fff, #121212);
	}

	.sidebar-section-body {
		max-height: fit-content;
	}

	.sidebar-overlay.visible {
		display: block;
	}

	.mobile-only {
		display: inline-block;
	}

	.desktop-only {
		display: none;
	}

	.collapse-button {
		display: inline-block;
		padding: 0;
	}

	.sidebar-resize-handle {
		display: none;
	}

	.item-card {
		padding: 8px;
		width: 100%;
		max-width: 100%;
	}
}
</style>
<div id="app">
	<div id="sidebarOverlay" class="sidebar-overlay" :class="{ visible: sidebarVisible }" @click="hideSidebar">
	</div>
	<div id="sidebar" class="sidebar" :class="{ visible: sidebarVisible }" :style="{ width: sidebarWidth + 'px' }">
		<div class="sidebar-resize-handle"></div>
		<div class="sidebar-content">
			<button @click="hideSidebar" id="hideSidebarButton" class="mobile-only">
				<span class="material-symbols-rounded">
					close
				</span>
			</button>
			<div class="sidebar-section" :class="getSectionClass('years')" :key="'years-section'">
				<div class="sidebar-section-header" @click="toggleCollapse('years')">
					<span>{{ filteredYearLabel }}</span>
					<button class="collapse-button" :class="collapseIconClass(isCollapsed.years)">
						<span class="material-symbols-rounded">
							keyboard_arrow_up
						</span>
					</button>
				</div>
				<div class="sidebar-section-body">
					<div class="year-grid">
						<div v-if="filteredYearsInModal.length === 0" class="no-results">
							نتیجه‌ای وجود ندارد
						</div>
						<div v-else v-for="[year, count] in filteredYearsInModal" :key="year"
							@click="selectedYear === year ? removeYearFilter() : selectYearFromModal(year)"
							@mouseenter="hoveredItem = year" @mouseleave="hoveredItem = null"
							:class="{ 'hovered': hoveredItem === year }" class="year-item">
							{{ year }} <span class="count">({{ count }})</span>
							<span v-if="selectedYear === year" class="remove-filter" @click.stop="removeYearFilter">
								<span class="material-symbols-rounded" style="font-size: inherit;">
									close
								</span>
							</span>
						</div>
					</div>
				</div>
			</div>

			<div class="sidebar-section" :class="getSectionClass('designers')">
				<div class="sidebar-section-header" @click="toggleCollapse('designers')">
					<span>{{ filteredDesignerLabel }}</span>
					<button class="collapse-button" :class="collapseIconClass(isCollapsed.designers)">
						<span class="material-symbols-rounded">
							keyboard_arrow_up
						</span>
					</button>
				</div>
				<div class="sidebar-section-body">
					<div class="search-container">
						<input type="text" v-model="designerSearchQuery" placeholder="جستجوی طراح…" />
						<span v-if="designerSearchQuery" @click="clearDesignerSearchQuery" class="clearSearch">
							<span class="material-symbols-rounded">
								close
							</span>
						</span>
					</div>
					<div class="designer-grid">
						<div v-if="filteredDesignersInModal.length === 0" class="no-results">
							نتیجه‌ای وجود ندارد
						</div>
						<div v-else v-for="[designer, count] in filteredDesignersInModal" :key="designer"
							@click="selectedDesigner === designer ? removeDesignerFilter() : selectDesignerFromModal(designer)"
							@mouseenter="hoveredItem = designer" @mouseleave="hoveredItem = null"
							:class="{ 'hovered': hoveredItem === designer }" class="designer-item">
							{{ designer }} <span class="count">({{ count }})</span>
							<span v-if="selectedDesigner === designer" class="remove-filter"
								@click.stop="removeDesignerFilter">
								<span class="material-symbols-rounded" style="font-size: inherit;">
									close
								</span>
							</span>
						</div>
					</div>
				</div>
			</div>

			<div class="sidebar-section" :class="getSectionClass('directors')">
				<div class="sidebar-section-header" @click="toggleCollapse('directors')">
					<span>{{ filteredDirectorLabel }}</span>
					<button class="collapse-button" :class="collapseIconClass(isCollapsed.directors)">
						<span class="material-symbols-rounded">
							keyboard_arrow_up
						</span>
					</button>
				</div>
				<div class="sidebar-section-body">
					<div class="search-container">
						<input type="text" v-model="directorSearchQuery" placeholder="جستجوی کارگردان…" />
						<span v-if="directorSearchQuery" @click="clearDirectorSearchQuery" class="clearSearch">
							<span class="material-symbols-rounded">
								close
							</span>
						</span>
					</div>
					<div class="director-grid">
						<div v-if="filteredDirectorsInModal.length === 0" class="no-results">
							نتیجه‌ای وجود ندارد
						</div>
						<div v-else v-for="[director, count] in filteredDirectorsInModal" :key="director"
							@click="selectedDirector === director ? removeDirectorFilter() : selectDirectorFromModal(director)"
							@mouseenter="hoveredItem = director" @mouseleave="hoveredItem = null"
							:class="{ 'hovered': hoveredItem === director }" class="director-item">
							{{ director }} <span class="count">({{ count }})</span>
							<span v-if="selectedDirector === director" class="remove-filter"
								@click.stop="removeDirectorFilter">
								<span class="material-symbols-rounded" style="font-size: inherit;">
									close
								</span>
						</div>
					</div>
				</div>
			</div>

			<div class="sidebar-section" :class="getSectionClass('letters')">
				<div class="sidebar-section-header" @click="toggleCollapse('letters')">
					<span>{{ filteredLetterLabel }}</span>
					<button class="collapse-button" :class="collapseIconClass(isCollapsed.letters)">
						<span class="material-symbols-rounded">
							keyboard_arrow_up
						</span>
					</button>
				</div>
				<div class="sidebar-section-body">
					<div class="letter-grid">
						<div v-if="filteredLettersInModal.length === 0" class="no-results">
							نتیجه‌ای وجود ندارد
						</div>
						<div v-else v-for="[letter, count] in filteredLettersInModal" :key="letter"
							@click="selectedLetter === letter ? removeLetterFilter() : selectLetterFromModal(letter)"
							@mouseenter="hoveredItem = letter" @mouseleave="hoveredItem = null"
							:class="{ 'hovered': hoveredItem === letter }" class="letter-item">
							{{ letter }} <span class="count">({{ count }})</span>
							<span v-if="selectedLetter === letter" class="remove-filter"
								@click.stop="removeLetterFilter">
								<span class="material-symbols-rounded" style="font-size: inherit;">
									close
								</span>
						</div>
					</div>
				</div>
			</div>
			<a href="https://t.me/arastehnasab" class="mobile-only"
				style="color: gray; font-weight: normal; text-decoration: none; padding: 10px 20px;">
				پیشنهادی دارید؟
			</a>
		</div>
	</div>

	<div v-if="lightboxItem" class="lightbox" @click="closeLightbox">
		<template v-if="lightboxImage">
			<img :src="lightboxImage" alt="Lightbox Image" />
		</template>
		<template v-else>
			<div class="no-logo-placeholder">
				(بدون لوگو)
			</div>
		</template>
		<div class="loading-spinner" v-if="isLoading">
			<svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
				<circle cx="25" cy="25" r="20" stroke="#ccc" stroke-width="5" fill="none"
					stroke-dasharray="31.415, 31.415">
					<animateTransform attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="1s"
						repeatCount="indefinite" />
				</circle>
			</svg>
		</div>
		<button class="lightbox-button" @click.stop="closeLightbox" style="top: 20px">
			<span class="material-symbols-rounded" style="font-size: xx-large;">
				close
			</span>
		</button>
		<a :href="downloadLink(lightboxItem)" aria-label="دریافت پوستر" target="_blank">
			<button class="lightbox-button" style="bottom: 20px">
				<span class="material-symbols-rounded" style="font-size: xx-large;">
					download
				</span>
			</button>
		</a>
	</div>

	<div id="main-content">
		<button onclick="topFunction()" id="toTop">
			<span class="material-symbols-rounded">
				north
			</span>
		</button>

		<div id="searchBar" class="search-bar">
			<div class="search-container">
				<button @click="toggleSidebar" id="toggleSidebarButton" class="mobile-only">
					<span class="material-symbols-rounded">
						menu
					</span>
				</button>
				<div style="position: relative; width: 100%;">
					<input type="text" v-model="searchTerm" placeholder="جستجو…" />
					<span v-if="searchTerm" @click="clearSearchTerm" class="clearSearch">
						<span class="material-symbols-rounded">
							close
						</span>
					</span>
				</div>
				<button @click="resetFilters" id="resetSearch">
					<span class="material-symbols-rounded">
						refresh
					</span>
				</button>
				<button @click="toggleOptions" id="collapseButton" class="collapse-button mobile-only"
					:class="collapseIconClass(isOptionsCollapsed)">
					<span class="material-symbols-rounded" style="font-size: xx-large;">
						keyboard_arrow_up
					</span>
				</button>
			</div>
			<div class="options" :class="{ 'collapsed': isOptionsCollapsed }">
				<div class="toggle-switch" @click="togglePosterMode" :data-mode="posterMode ? 'poster' : 'logo'">
					<span :class="{ active: !posterMode }">پوستر</span>
					<span :class="{ active: posterMode }">لوگو</span>
				</div>
				<div class="similar-chars-toggle">
					<label for="similarCharsSwitch" style="cursor: pointer;">
						<input type="checkbox" id="similarCharsSwitch" v-model="combineSimilarChars">
						حروف مشابه
					</label>
					<label>
						<span class="material-symbols-rounded tooltip">
							info
							<span class="tooltiptext">حروفی که شکل یکسانی دارند، یکی در نظر گرفته شود: مانند س، ش</span>
						</span>
					</label>
				</div>

				<div class="similar-chars-toggle">
					<label for="pixelatedSwitch" style="cursor: pointer;">
						<input type="checkbox" id="pixelatedSwitch" v-model="pixelatedEffect" v-if="posterMode">
						<input type="checkbox" id="pixelatedSwitch" v-else disabled>
						سانسور
					</label>
					<label>
						<span class="material-symbols-rounded tooltip">
							info
							<span class="tooltiptext" v-if="posterMode">مخفی کردن تصاویری که ممکن است نامناسب
								باشند</span>
						</span>
					</label>
				</div>
				<div class="sort-order-container">
					<label>
						<span class="material-symbols-rounded">
							swap_vert
						</span>
					</label>
					<div class="triple-switch" :data-sort="sortOrder">
						<span :class="{ active: sortOrder === 'alphabetical' }"
							@click="sortOrder = 'alphabetical'">الفبایی</span>
						<span :class="{ active: sortOrder === 'year' }" @click="sortOrder = 'year'">سال</span>
						<span :class="{ active: sortOrder === 'random' }" @click="sortOrder = 'random'">تصادفی</span>
					</div>
				</div>
			</div>
			<div v-if="filteredItems.length > 0" style="margin-top: 15px; text-align: center; padding-bottom: 5px;">
				{{ filteredItemsLength }} از {{ itemsLength }} پوستر ({{ uniqueFilmCount }} فیلم)
			</div>
		</div>
		<div id="filters" class="filters-container" v-if="activeFilters.length > 0">
			<div v-for="(filter, index) in activeFilters" :key="index" @click="removeFilter(filter.type, filter.value)"
				class="designer-item">
				<span style="align-content: center;">{{ filter.label }}: {{ filter.value }}</span>
				<button class="remove-filter">
					<span class="material-symbols-rounded">close</span>
				</button>
			</div>
		</div>
		<div v-if="filteredItems.length > 0" class="results-grid">
			<div class="item-card" v-for="(item, index) in (isShowMore ? filteredItems : filteredItems.slice(0, 30))"
				:key="index">
				<div style="display: flex; flex-direction: column; justify-content: center; height: 100%;">
					<div class="image-container">
						<div @click="handleImageClick(item)" class="clickable-image">
							<template v-if="!posterMode && !item.logo">
								<div class="no-logo-placeholder">
									(بدون لوگو)
								</div>
							</template>
							<template v-else>
								<img :src="getItemUrl(item, posterMode, pixelatedEffect)"
									:key="getItemUrl(item, posterMode, pixelatedEffect)" :alt="item.filmLabel"
									class="item-image"
									:class="{ pixelated: pixelatedEffect && !item.logo && item.isNsfw && posterMode }" />
							</template>
						</div>
						<a :href="downloadLink(item)" aria-label="دریافت پوستر" target="_blank">
							<button class="download-btn">
								<span class="material-symbols-rounded">
									download
								</span>
							</button>
						</a>
					</div>
	
					<div class="item-title">
						{{ item.filmLabel }}
						<span class="year-link" @click="selectYearFromTitle(toPersianYear(item.date))">
							({{ toPersianYear(item.date) }})
						</span>
					</div>
	
					<div v-if="item.designers && item.designers.length > 0" class="item-designer">
						<span class="mobile-only">
							<span class="material-symbols-rounded"
								style="margin-left: 5px; top: 8px; position: relative;">person_edit</span>
						</span>
						<span class="desktop-only">{{ item.designers.length === 1 ? 'طراح: ' : 'طراحان: ' }}</span>
						<span v-for="(designer, index) in item.designers" :key="index">
							<a href="#" @click.prevent="selectDesigner(designer.label)" aria-label="انتخاب طراح">{{ designer.label }}</a>
							<span class="item-links">
								<a :href="'https://www.wikidata.org/wiki/' + designer.id" aria-label="ویکی‌داده" target="_blank">
									<img src="https://upload.wikimedia.org/wikipedia/commons/7/71/Wikidata.svg"
										alt="ویکی‌داده" class="linkIcon">
								</a>
								<template v-if="designer.faWikipediaLink">
									<a :href="'https://fa.wikipedia.org/wiki/' + designer.faWikipediaLink.replaceAll(' ', '_')"
										aria-label="ویکی‌پدیا" target="_blank">
										<img src="https://upload.wikimedia.org/wikipedia/commons/2/23/Wikipedia_%22W%22_Rounded_White.svg"
											alt="ویکی‌پدیا" class="linkIcon">
									</a>
								</template>
							</span>
							<br v-if="index < item.designers.length - 1">
						</span>
					</div>
				</div>
				<div id="film-links" class="item-links">
					<a v-if="item.imdbID" :href="'https://www.imdb.com/title/' + item.imdbID" aria-label="IMDb" target="_blank">
						<img src="https://upload.wikimedia.org/wikipedia/commons/5/53/IMDB_-_SuperTinyIcons.svg"
							alt="IMDb" class="linkIcon">
					</a>
					<a v-if="item.film" :href="'https://www.wikidata.org/wiki/' + item.film" aria-label="ویکی‌داده" target="_blank">
						<img src="https://upload.wikimedia.org/wikipedia/commons/7/71/Wikidata.svg" alt="ویکی‌داده" class="linkIcon">
					</a>
					<a v-if="item.faWikipediaLink"
						:href="'https://fa.wikipedia.org/wiki/' + item.faWikipediaLink.replaceAll(' ', '_')"
						aria-label="ویکی‌پدیا" target="_blank">
						<img src="https://upload.wikimedia.org/wikipedia/commons/2/23/Wikipedia_%22W%22_Rounded_White.svg"
							alt="ویکی‌پدیا" class="linkIcon">
					</a>
				</div>
			</div>
		</div>
		<p style="text-align: center" v-else>نتیجه‌ای برای نمایش وجود ندارد.</p>
		<div v-if="!isShowMore && filteredItems.length > 30" style="text-align: center; padding-top: 1em;">
			<button @click="showMore">نمایش بیشتر</button>
		</div>
	</div>
</div>

<script>
let toTop;
window.onscroll = () => {
	if (!toTop) toTop = document.getElementById('toTop');
	toTop.style.bottom = document.documentElement.scrollTop > 20 ? '20px' : '-100px';
}

const topFunction = () => document.documentElement.scrollTop = 0;

let lastScrollTop = 0;

window.addEventListener('scroll', () => {
	const searchBar = document.getElementById('searchBar');
	const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;

	if (currentScrollTop > lastScrollTop) {
		searchBar.classList.add('hidden');
	} else {
		searchBar.classList.remove('hidden');
	}

	lastScrollTop = currentScrollTop <= 0 ? 0 : currentScrollTop;
});

const setup = () => {
	const { ref, computed, watch, onMounted, nextTick, onUnmounted } = Vue;

	const darkMode = ref(false);
	const toggleDarkMode = () => darkMode.value = !darkMode.value;
	const isShowMore = ref(false);
	const showMore = () => isShowMore.value = true;

	const designerQuery = ref('');
	const isOptionsCollapsed = ref(true);
	const designerSearchQuery = ref('');
	const searchTerm = ref('');
	const selectedYear = ref('');
	const selectedDesigner = ref('');
	const selectedDirector = ref('');
	const selectedLetter = ref('');
	const posterMode = ref(true);
	const combineSimilarChars = ref(false);
	const pixelatedEffect = ref(false);
	const sortOrder = ref('random');
	const applyInitialFilters = () => {
		const urlParams = new URLSearchParams(window.location.search);
		searchTerm.value = urlParams.get('q') || '';
		selectedYear.value = urlParams.get('y') || '';
		selectedDesigner.value = urlParams.get('designer') || '';
		selectedDirector.value = urlParams.get('director') || '';
		selectedLetter.value = urlParams.get('letter') || '';
		posterMode.value = urlParams.get('mode') !== 'logo';
		combineSimilarChars.value = urlParams.get('similar') === 'true';
		pixelatedEffect.value = urlParams.get('censor') === 'true' || location.hostname === 'filmposters.ir';
		sortOrder.value = urlParams.get('sort') || 'random';
	};
	applyInitialFilters();

	const updateURL = () => {
		const params = new URLSearchParams();
		if (searchTerm.value) params.set('q', searchTerm.value);
		if (selectedYear.value) params.set('y', selectedYear.value);
		if (selectedDesigner.value) params.set('designer', selectedDesigner.value);
		if (selectedDirector.value) params.set('director', selectedDirector.value);
		if (selectedLetter.value) params.set('letter', selectedLetter.value);
		params.set('mode', posterMode.value ? 'poster' : 'logo');
		params.set('similar', combineSimilarChars.value ? 'true' : 'false');
		params.set('censor', pixelatedEffect.value ? 'true' : 'false');
		params.set('sort', sortOrder.value);

		const newUrl = `${window.location.pathname}?${params.toString()}`;
		window.history.pushState({}, '', newUrl);
	};
	watch([
		searchTerm, selectedYear, selectedDesigner, selectedDirector,
		selectedLetter, posterMode, combineSimilarChars, pixelatedEffect, sortOrder
	], updateURL);

	const isCollapsed = ref({
		designers: false,
		directors: true,
		years: false,
		letters: true
	});

	const getSectionClass = section => isCollapsed.value[section] ? 'collapsed' : 'expanded';
	const selectDirectorFromModal = director => selectedDirector.value = director;
	const selectYearFromModal = year => selectedYear.value = year;
	const selectLetterFromModal = letter => selectedLetter.value = letter;
	const togglePosterMode = () => posterMode.value = !posterMode.value;
	const toggleOptions = () => isOptionsCollapsed.value = !isOptionsCollapsed.value;
	const collapseIconClass = value => value ? 'rotate-down' : 'rotate-up';

	const selectDesigner = designer => {
		selectedDesigner.value = designer;
		designerQuery.value = designer;
		applyFilters();
	};

	const applyFilters = () => {
		results.value = items.value.filter(item => {
			let matchesDesigner = true;
			if (selectedDesigner.value) {
				matchesDesigner = item.designerLabel === selectedDesigner.value;
			}
			return matchesDesigner;
		});
	};

	const resetFilters = () => {
		searchTerm.value = '';
		combineSimilarChars.value = false;
		sortOrder.value = 'random';
		selectedYear.value = '';
		selectedDesigner.value = '';
		selectedDirector.value = '';
		selectedLetter.value = '';
	};

	const items = ref([]);
	fetch('db.json').then(x => x.json()).then(data => {
		const films = Object.values(data.films);
		uniqueFilmCount.value = films.length;
		items.value = films.flatMap(film => {
			return film.posters.map((poster, i) => {
				const item = {};
				item.film = film.id;
				if (!film.labels.fa) {
					console.log(film.id + ' doesn\'t have Persian label!');
				}
				item.filmLabel = film.labels.fa || film.labels.en || '';
				item.aliases = film.aliases?.fa?.join(',') ?? '';
				item.date = film.date
					.map(x => x.replace(/^\+/, '')
						.replace('-01-01T00:00:00Z', '-03-30T00:00:00Z')
						.replace('-00-00T00:00:00Z', '-03-30T00:00:00Z')
						.replace('-00T', '-01T')
					)
					.sort((a, b) => new Date(a).getTime() - new Date(b).getTime())[0];
				item.poster = poster.image;
				item.posterHash = poster.hash;
				item.isNsfw = poster.characteristics?.includes('Q2716583') ?? false;
				if (poster.designers?.length ?? 0) {
					item.designers = poster.designers.map(designerId => {
						const designer = data.secondary[designerId];
						return {
							id: designerId,
							label: designer.labels.fa,
							faWikipediaLink: designer.sitelinks?.fawiki
						};
					});
					item.characteristics = poster.characteristics;
					item.designerLabel = data.secondary[poster.designers[0]].labels.fa;
					const fawiki = data.secondary[poster.designers[0]].sitelinks.fawiki;
					if (fawiki) item.designerFaWikipediaLink = fawiki;
				}
				if (film.directors.length) {
					item.director = film.directors[0];
					item.directorLabel = data.secondary[film.directors[0]].labels.fa;
				}
				if (film.imdb.length) {
					item.imdbID = film.imdb[0];
				}
				item.faWikipediaLink = film.sitelinks.fawiki;
				if (film.logos.length > i) {
					item.logo = film.logos[i].image;
					item.logoHash = film.logos[i].hash;
				}
				return item;
			});
		});
	});

	const similarCharsMapping = {
		'آ': '[آاأإ]', 'ا': '[آاأإ]', 'أ': '[آاأإ]', 'إ': '[آاأإ]', 'ط': '[طظ]', 'ظ': '[طظ]', 'ب': '[بپتثنی]', 'پ': '[بپتثنی]',
		'ت': '[بپتثنی]', 'ث': '[بپتثنی]', 'ن': '[بپتثنی]', 'ی': '[بپتثنی]', 'ج': '[جچحخ]',
		'چ': '[جچحخ]', 'ح': '[جچحخ]', 'خ': '[جچحخ]', 'د': '[دذ]',
		'ذ': '[دذ]', 'ر': '[رزژ]', 'ز': '[رزژ]', 'ژ': '[رزژ]', 'س': '[سش]',
		'ش': '[سش]', 'ص': '[صض]', 'ض': '[صض]', 'ع': '[عغ]',
		'غ': '[عغ]', 'ف': '[فق]', 'ق': '[فق]', 'ک': '[کگ]',
		'گ': '[کگ]'
	};

	const persianAlphabet = [
		'آ', 'ا', 'ب', 'پ', 'ت', 'ث', 'ج', 'چ', 'ح', 'خ', 'د', 'ذ', 'ر', 'ز', 'ژ', 'س', 'ش', 'ص', 'ض', 'ط', 'ظ', 'ع', 'غ', 'ف', 'ق', 'ک', 'گ', 'ل', 'م', 'ن', 'و', 'ه', 'ی'
	];

	const toPersianYear = date => {
		const year = new Date(date).toLocaleDateString('fa').split('/')[0];
		return year === 'Invalid Date' ? 'نامشخص' : year;
	};

	const availableYears = computed(() => {
		const groups = Object.groupBy(items.value, item => toPersianYear(item.date));
		return Object.keys(groups).sort().map(year => [year, groups[year].length.toLocaleString('fa')]);
	});

	const availableDesigners = computed(() => {
		const groups = Object.groupBy(items.value.filter(x => x.designerLabel), item => item.designerLabel);
		return Object.keys(groups)
			.map(designer => [designer, groups[designer].length])
			.sort((a, b) => b[1] - a[1])
			.map(([designer, count]) => [designer, count.toLocaleString('fa')]);
	});

	const availableDirectors = computed(() => {
		const groups = Object.groupBy(items.value.filter(x => x.directorLabel), item => item.directorLabel);
		return Object.keys(groups)
			.map(director => [director, groups[director].length])
			.sort((a, b) => b[1] - a[1])
			.map(([director, count]) => [director, count.toLocaleString('fa')]);
	});

	const getItemTitleWithYear = item => {
		return item.filmLabel + (item.date ? ` (${toPersianYear(item.date)})` : '');
	};

	const letterCounts = computed(() => {
		const counts = persianAlphabet.reduce((acc, letter) => {
			acc[letter] = items.value.filter(item => item.filmLabel.startsWith(letter)).length;
			return acc;
		}, {});
		return counts;
	});

	const filteredItems = computed(() => {
		let results = items.value;

		if (searchTerm.value.length) {
			const modifiedSearchTerm = searchTerm.value
				.split('')
				.map(char => (combineSimilarChars.value ? (similarCharsMapping[char] || char) : char))
				.join('');
			const regex = new RegExp(modifiedSearchTerm, 'i');
			results = results.filter(item => regex.test(item.filmLabel) || regex.test(item.aliases || ''));
		}

		if (selectedYear.value) {
			results = results.filter(item => toPersianYear(item.date) === selectedYear.value);
		}

		if (selectedDesigner.value) {
			results = results.filter(item =>
				item.designers && item.designers.some(designer => designer.label === selectedDesigner.value)
			);
		}

		if (selectedDirector.value) {
			results = results.filter(item => item.directorLabel === selectedDirector.value);
		}

		if (selectedLetter.value) {
			results = results.filter(item => item.filmLabel.startsWith(selectedLetter.value));
		}

		if (sortOrder.value === 'alphabetical') {
			results = results.sort((a, b) => a.filmLabel.localeCompare(b.filmLabel, 'fa'));
		} else if (sortOrder.value === 'year') {
			results = results.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());
		} else if (sortOrder.value === 'random') {
			results = results.slice().sort(() => Math.random() - 0.5);
		}

		return results;
	});

	watch(designerQuery, newValue => {
		if (!newValue) {
			selectedDesigner.value = '';
		}
	});

	const filteredYears = computed(() => {
		const groups = Object.groupBy(filteredItems.value, item => toPersianYear(item.date));
		return Object.keys(groups)
			.sort()
			.map(year => [year, groups[year].length.toLocaleString('fa')]);
	});

	const filteredDesigners = computed(() => {
		const groups = Object.groupBy(filteredItems.value.filter(x => x.designerLabel), item => item.designerLabel);
		return Object.keys(groups)
			.map(designer => [designer, groups[designer].length])
			.sort((a, b) => b[1] - a[1])
			.map(([designer, count]) => [designer, count.toLocaleString('fa')]);
	});

	const filteredDirectors = computed(() => {
		const groups = Object.groupBy(filteredItems.value.filter(x => x.directorLabel), item => item.directorLabel);
		return Object.keys(groups)
			.map(director => [director, groups[director].length])
			.sort((a, b) => b[1] - a[1])
			.map(([director, count]) => [director, count.toLocaleString('fa')]);
	});

	const filteredDesignersInModal = computed(() => {
		const groups = Object.groupBy(filteredItems.value.filter(x => x.designerLabel), item => item.designerLabel);
		const designers = Object.keys(groups)
			.map(designer => [designer, groups[designer].length])
			.sort((a, b) => b[1] - a[1])
			.map(([designer, count]) => [designer, count.toLocaleString('fa')]);

		if (!designerSearchQuery.value) {
			return designers;
		}
		return designers.filter(([designer]) =>
			designer.includes(designerSearchQuery.value)
		);
	});

	const selectDesignerFromModal = designer => {
		selectedDesigner.value = designer;
		designerQuery.value = designer;
	};

	const filteredYearsInModal = computed(() => {
		const groups = Object.groupBy(filteredItems.value, item => toPersianYear(item.date));
		return Object.keys(groups)
			.sort()
			.map(year => [year, groups[year].length.toLocaleString('fa')]);
	});

	watch(filteredItems, newValue => {
		if (newValue.length > 100) {
			isShowMore.value = false;
		}
	});

	const directorSearchQuery = ref('');

	const filteredDirectorsInModal = computed(() => {
		const groups = Object.groupBy(filteredItems.value.filter(x => x.directorLabel), item => item.directorLabel);
		const directors = Object.keys(groups)
			.map(director => [director, groups[director].length])
			.sort((a, b) => b[1] - a[1])
			.map(([director, count]) => [director, count.toLocaleString('fa')]);

		if (!directorSearchQuery.value) {
			return directors;
		}
		return directors.filter(([director]) =>
			director.includes(directorSearchQuery.value)
		);
	});

	const filteredLettersInModal = computed(() => {
		const groups = Object.groupBy(filteredItems.value, item => item.filmLabel[0]);

		const letters = persianAlphabet
			.filter(letter => groups[letter])
			.map(letter => [letter, groups[letter].length.toLocaleString('fa')]);

		return letters;
	});

	const filteredYearLabel = computed(() => selectedYear.value ? `سال: ${selectedYear.value}` : 'سال‌ها');
	const filteredDesignerLabel = computed(() => selectedDesigner.value ? `طراح: ${selectedDesigner.value}` : 'طراحان');
	const filteredDirectorLabel = computed(() => selectedDirector.value ? `کارگردان: ${selectedDirector.value}` : 'کارگردان‌ها');
	const filteredLetterLabel = computed(() => selectedLetter.value ? `حرف اول: ${selectedLetter.value}` : 'حروف اول');

	const sidebarWidth = ref(440);
	const minSidebarWidth = ref(300);
	const maxSidebarWidth = ref(600);

	const startResize = e => {
		e.preventDefault();
		startX = e.clientX;
		startWidth = sidebarWidth.value;
		document.addEventListener('mousemove', resize);
		document.addEventListener('mouseup', stopResize);
	};

	const resize = e => {
		const newWidth = startWidth + (startX - e.clientX);
		if (newWidth >= minSidebarWidth.value && newWidth <= maxSidebarWidth.value) {
			sidebarWidth.value = newWidth;
		}
	};

	const stopResize = () => {
		document.removeEventListener('mousemove', resize);
		document.removeEventListener('mouseup', stopResize);
	};

	onMounted(() => {
		const resizeHandle = document.querySelector('.sidebar-resize-handle');
		if (resizeHandle) {
			resizeHandle.addEventListener('mousedown', startResize);
		} else {
			console.log('عنصر دستگیره تغییر اندازه یافت نشد!');
		}
	});

	const hoveredItem = ref(null);

	const removeYearFilter = () => {
		selectedYear.value = '';
		hoveredItem.value = null;
	};

	const removeDesignerFilter = () => {
		selectedDesigner.value = '';
		hoveredItem.value = null;
	};

	const removeDirectorFilter = () => {
		selectedDirector.value = '';
		hoveredItem.value = null;
	};

	const removeLetterFilter = () => {
		selectedLetter.value = '';
		hoveredItem.value = null;
	};

	const sidebarVisible = ref(false);

	const toggleSidebar = () => {
		sidebarVisible.value = !sidebarVisible.value;
		if (sidebarVisible.value) {
			window.history.pushState(null, '', window.location.pathname);
		}
	};

	const hideSidebar = () => sidebarVisible.value = false;

	onMounted(() => window.addEventListener('popstate', handlePopState));

	onUnmounted(() => window.removeEventListener('popstate', handlePopState));

	const handlePopState = e => {
		if (sidebarVisible.value) {
			hideSidebar();
			e.preventDefault();
			window.history.pushState(null, '', window.location.pathname);
		}
	};

	const clearSearchTerm = () => searchTerm.value = '';
	const clearDesignerSearchQuery = () => designerSearchQuery.value = '';
	const clearDirectorSearchQuery = () => directorSearchQuery.value = '';

	const toggleCollapse = section => isCollapsed.value[section] = !isCollapsed.value[section];

	const lightboxItem = ref(undefined);
	const lightboxImage = ref(undefined);
	const isLoading = ref(false);

	const openLightbox = item => {
		if (!posterMode && !item.logo) {
			lightboxImage.value = undefined;
			lightboxItem.value = undefined;
			return;
		}
		isLoading.value = true;
		lightboxImage.value = posterMode.value ? getPosterUrl(item.poster, item.posterHash, 1200) : getPosterUrl(item.logo, item.logoHash, 1200);
		lightboxItem.value = item;

		setTimeout(() => {
			isLoading.value = false;
		}, 1000);
	};

	const closeLightbox = () => {
		lightboxItem.value = undefined;
		isLoading.value = false;
	};

	watch(lightboxItem, newValue => {
		if (newValue) {
			document.addEventListener('click', handleClickOutsideLightbox);
		} else {
			document.removeEventListener('click', handleClickOutsideLightbox);
		}
	});

	const handleClickOutsideLightbox = event => {
		const lightbox = document.querySelector('.lightbox');
		if (lightbox && !lightbox.contains(event.target)) {
			closeLightbox();
		}
	};

	const handleImageClick = item => {
		console.log('Image clicked:', item);
		event.stopPropagation();
		openLightbox(item);
	};

	const downloadLink = item => {
		const name = posterMode.value ? item.poster : item.logo;
		if (!name) return 'https://upload.wikimedia.org/wikipedia/commons/8/82/NoImageEn.svg';
		const hash = posterMode.value ? item.posterHash : item.logoHash;
		return `https://upload.wikimedia.org/wikipedia/commons/${hash[0]}/${hash}/${name}?download`;
	};

	const selectYearFromTitle = year => selectedYear.value = year;

	const activeFilters = computed(() => {
		const filters = [];
		if (selectedYear.value) {
			filters.push({ type: 'year', label: 'سال', value: selectedYear.value });
		}
		if (selectedDesigner.value) {
			filters.push({ type: 'designer', label: 'طراح', value: selectedDesigner.value });
		}
		if (selectedDirector.value) {
			filters.push({ type: 'director', label: 'کارگردان', value: selectedDirector.value });
		}
		if (selectedLetter.value) {
			filters.push({ type: 'letter', label: 'حرف اول', value: selectedLetter.value });
		}
		return filters;
	});

	const removeFilter = (type, value) => {
		switch (type) {
			case 'year':
				selectedYear.value = '';
				break;
			case 'designer':
				selectedDesigner.value = '';
				break;
			case 'director':
				selectedDirector.value = '';
				break;
			case 'letter':
				selectedLetter.value = '';
				break;
		}
	};

	const filteredItemsLength = computed(() => {
		return filteredItems.value.length.toLocaleString('fa', { useGrouping: false });
	});

	const itemsLength = computed(() => {
		return items.value.length.toLocaleString('fa', { useGrouping: false });
	});

	const uniqueFilmCount = computed(() => {
		const uniqueFilms = new Set(filteredItems.value.map(item => item.film));
		return uniqueFilms.size.toLocaleString('fa', { useGrouping: false });
	});

	const getPosterUrl = (name, hash, width) => {
		if (!name) return 'https://upload.wikimedia.org/wikipedia/commons/8/82/NoImageEn.svg';
		return `https://upload.wikimedia.org/wikipedia/commons/thumb/${hash[0]}/${hash}/${name}/${width}px-${name}`;
	};

	const getItemUrl = (item, posterMode, pixelatedEffect) => {
		if (!posterMode && !item.logo) return null;
		if (posterMode && pixelatedEffect && item.isNsfw && item.logo) return getPosterUrl(item.logo, item.logoHash, 600);
		return posterMode ? getPosterUrl(item.poster, item.posterHash, 600) : getPosterUrl(item.logo, item.logoHash, 600);
	}

	return {
		showMore, isShowMore, searchTerm, combineSimilarChars, posterMode, filteredItems, items,
		getItemUrl, getItemTitleWithYear, darkMode, toggleDarkMode, sortOrder, selectedYear,
		availableYears, availableDesigners, selectedDesigner, filteredYears,
		filteredDesigners, designerQuery, selectDesigner, filteredDirectors, availableDirectors,
		selectedDirector, persianAlphabet, selectedLetter, letterCounts, resetFilters, togglePosterMode,
		toggleOptions, isOptionsCollapsed, collapseIconClass, filteredDesignersInModal, designerSearchQuery,
		selectDesignerFromModal, filteredDirectorsInModal, selectDirectorFromModal, filteredYearsInModal,
		selectYearFromModal, filteredLettersInModal, selectLetterFromModal, isCollapsed, toggleCollapse,
		filteredYearLabel, filteredDesignerLabel, filteredDirectorLabel, filteredLetterLabel, getSectionClass,
		directorSearchQuery, sidebarWidth, minSidebarWidth, maxSidebarWidth, removeYearFilter,
		removeDesignerFilter, removeDirectorFilter, removeLetterFilter, hoveredItem, hideSidebar,
		sidebarVisible, uniqueFilmCount, toggleSidebar, pixelatedEffect, clearSearchTerm, lightboxItem,
		lightboxImage, openLightbox, closeLightbox, downloadLink, handleImageClick,
		clearDesignerSearchQuery, clearDirectorSearchQuery, selectYearFromTitle, toPersianYear, isLoading,
		handlePopState, activeFilters, removeFilter, filteredItemsLength, itemsLength
	};
}

Vue.createApp({ setup }).mount('#app');
</script>
